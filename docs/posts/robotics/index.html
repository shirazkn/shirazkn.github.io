<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Representing Spatial Velocities | Shiraz</title>
<meta name="keywords" content="robotics, lie-groups, geometry">
<meta name="description" content="I&rsquo;ve been going through Russ Tedrake&rsquo;s notes on robotics, which got me thinking about their so-called monogram notation. The result of this deliberation was a new notation for spatial velocities that bridges the gap between abstract Lie groups and their applications to robotics and computer graphics.">
<meta name="author" content="">
<link rel="canonical" href="https://shirazkn.github.io/posts/robotics/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.4dea143071e80a661ece3346f323b09d825fb9d7adc7c071af21feecd3174d45.css" integrity="sha256-TeoUMHHoCmYezjNG8yOwnYJfudetx8BxryH&#43;7NMXTUU=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://shirazkn.github.io/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://shirazkn.github.io/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://shirazkn.github.io/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://shirazkn.github.io/apple-touch-icon.png">
<link rel="mask-icon" href="https://shirazkn.github.io/favicon.ico">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="https://shirazkn.github.io/posts/robotics/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@4/tex-mml-chtml.js"></script>
<script>
  MathJax = {
    tex: {
      packages: {'[+]': ['mathtools']},
      displayMath: [['\\[', '\\]'], ['$$', '$$']],  
      inlineMath: [['\\(', '\\)'], ['$', '$']]  
    },
    loader:{
      load: ['ui/safe', '[tex]/mathtools']
    },
  };
</script>

<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=IM+Fell+DW+Pica">

<meta property="og:url" content="https://shirazkn.github.io/posts/robotics/">
  <meta property="og:site_name" content="Shiraz">
  <meta property="og:title" content="Representing Spatial Velocities">
  <meta property="og:description" content="I‚Äôve been going through Russ Tedrake‚Äôs notes on robotics, which got me thinking about their so-called monogram notation. The result of this deliberation was a new notation for spatial velocities that bridges the gap between abstract Lie groups and their applications to robotics and computer graphics.">
  <meta property="og:locale" content="en-us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2025-11-13T21:23:17-05:00">
    <meta property="article:modified_time" content="2025-11-13T21:23:17-05:00">
    <meta property="article:tag" content="Robotics">
    <meta property="article:tag" content="Lie-Groups">
    <meta property="article:tag" content="Geometry">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Representing Spatial Velocities">
<meta name="twitter:description" content="I&rsquo;ve been going through Russ Tedrake&rsquo;s notes on robotics, which got me thinking about their so-called monogram notation. The result of this deliberation was a new notation for spatial velocities that bridges the gap between abstract Lie groups and their applications to robotics and computer graphics.">


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://shirazkn.github.io/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Representing Spatial Velocities",
      "item": "https://shirazkn.github.io/posts/robotics/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Representing Spatial Velocities",
  "name": "Representing Spatial Velocities",
  "description": "I\u0026rsquo;ve been going through Russ Tedrake\u0026rsquo;s notes on robotics, which got me thinking about their so-called monogram notation. The result of this deliberation was a new notation for spatial velocities that bridges the gap between abstract Lie groups and their applications to robotics and computer graphics.",
  "keywords": [
    "robotics", "lie-groups", "geometry"
  ],
  "articleBody": "I‚Äôve been going through Russ Tedrake‚Äôs notes on robotics, which got me thinking about their so-called monogram notation. Basically, this is the notation that represents an $SE(3)$ transformation as $^aX^b$ ‚Äî more on that shortly. There is a recent review paper that points to several variations on this notation, and my postdoc advisor Gregory Chirikjian wrote a paper on it as well. Tedrake‚Äôs monogram notation looks very elegant until you get to spatial velocities, at which point strange artifacts such as the ‚Äúcross product‚Äù will appear. $\\newcommand{\\mf}[1]{\\mathbf{#1}}$ $\\newcommand{\\mono}[4]{ { ^{#2} #1 ^{#3} _{#4} } }$\nThis got me thinking about the connections between the monogram notation and abstract Lie groups. The result of this deliberation was a new notation for spatial velocities that bridges the gap between abstract Lie groups and their applications to robotics and computer graphics. The notation I present here has the following characteristics:\nit is consistent with the monogram notation (with a minor caveat, noted in the appendix ) it makes the transformation rules for spatial velocities look like those of points, vectors, and frames, and (for those familiar with abstract Lie groups) it emphasizes the role of the adjoint representation of $SE(3)$. Chapter 1. The Frame Bundle First, let‚Äôs think about the space in which frames live. Given a point $\\mf p\\in \\mathbb R^3$, a frame $f$ at $\\mf p^f$ is an ordered set of $3$ linearly independent vectors, $(\\mf f_1, \\mf f_2, \\mf f_3)$, along with the base point $\\mf p^f$. The frame is visualized as arrows starting at $\\mf p$ and facing outwards.1 The collection of all frames of $\\mathbb R^3$ makes up the frame bundle, $\\mathrm F\\mathbb R^3$. There is a map $\\pi:\\mathrm F\\mathbb R^3\\rightarrow \\mathbb R^3$ that maps $f$ to its base point $\\mf p^f$, giving us a fiber bundle structure.\nThe contents of the frame $f\\in\\mathrm F\\mathbb R^3$ can be stacked into a matrix as follows: $$ f=\\begin{bmatrix} \\mf f_1 \u0026 \\mf f_2 \u0026 \\mf f_3 \u0026 \\mf p^f\\\\ 0 \u0026 0 \u0026 0 \u0026 1 \\end{bmatrix}. $$ Meanwhile, an element $(A, \\mf p)$ of the semi-direct product group $G\\coloneq GL(3)\\ltimes\\mathbb R^3$ can be written as\n$$ (A, \\mf p) = \\begin{bmatrix} A \u0026 \\mf p\\\\ \\mf 0 \u0026 1 \\end{bmatrix}. $$ The transformation $(A, \\mf p)$ acts on $f$ from the right, giving us another frame that we denote as $g$: $$ \\begin{align} f \\cdot (A, \\mf p) \u0026= \\begin{bmatrix} \\mf f_1 \u0026 \\mf f_2 \u0026 \\mf f_3 \u0026 \\mf p^f\\\\ 0 \u0026 0 \u0026 0 \u0026 1 \\end{bmatrix}\\begin{bmatrix} A \u0026 \\mf p\\\\ \\mf 0 \u0026 1 \\end{bmatrix}\\\\ \u0026\\eqcolon \\begin{bmatrix} \\mf g_1 \u0026 \\mf g_2 \u0026 \\mf g_3 \u0026 \\mf p^g\\\\ 0 \u0026 0 \u0026 0 \u0026 1 \\end{bmatrix}\\\\ \u0026=g. \\end{align} $$ Conversely, given a pair of frames $f,g$, there is a unique transformation ${\\mono Xfg~}\\coloneq(\\mono Afg~, \\mono {\\mf p}fgf)$ in $G$ that takes $f$ to $g$. Equivalently, ${^fX^g}$ is the frame $g$ as seen from $f$. With this notation, we can write the transformation rule for frames as $\\mono Xeg~ = \\mono Xef~ \\mono Xfg~$.\n${^fX^g}$ is the transformation that takes frame $f$ to frame $g$\nEquivalently, it's frame $g$ as seen from frame $f$ The action of $G$ is transitive and free (it doesn't really matter what these words mean, but I have included a handy guide in the appendix). In particular, $SE(3)=SO(3)\\ltimes \\mathbb R^3$ is a subgroup of $G$ that acts on $\\mathrm F\\mathbb R^3$, and it leaves the subset $\\mathrm O\\mathbb R^3\\subseteq \\mathrm F\\mathbb R^3$ of positively-oriented orthogonal frames invariant! We will later specialize our discussion to the action of $SE(3)$ on $\\mathrm O\\mathbb R^3$. Chapter 2. Transformation Rules In the last chapter, we implicitly assumed that there is a well-defined ‚Äúorigin frame‚Äù, which we will call $e$. This is the frame that is described by the identity matrix, when concatenated into a matrix. For our purposes, we can assume that this is a frame that is stationary with respect to Earth üåè, and located at a convenient location (perhaps the lower-left corner of my desk).\nLet $f$ be the frame attached to the fan on my ceiling (which is currently stationary). We can describe the vector that goes from $e$ to $f$ as $\\mono {\\mf p}{e}{f}{~}$. Expressing this vector in the basis of $f$, we have $$ \\mono {\\mf p}{e}{f}{~} = \\mono {\\mf p}{e}{f}{\\mf f_1} \\mf f_1 + \\mono {\\mf p}{e}{f}{\\mf f_2} \\mf f_2 + \\mono {\\mf p}{e}{f}{\\mf f_3} \\mf f_3, $$ whose coefficients we can represent as a vector: $$ \\mono {\\mf p}{e}{f}{f}\\coloneq\\begin{bmatrix} \\mono {\\mf p}{e}{f}{\\mf f_1}\\\\ \\mono {\\mf p}{e}{f}{\\mf f_2}\\\\ \\mono {\\mf p}{e}{f}{\\mf f_3} \\end{bmatrix}. $$ We could also represent $\\mono {\\mf p}{e}{f}{~}$ in the origin (i.e., Earth) frame: $$ \\begin{align} \\mono {\\mf p}{e}{f}{~} \u0026= \\mono {\\mf p}{e}{f}{\\mf e_1} \\mf e_1 + \\mono {\\mf p}{e}{f}{\\mf e_2} \\mf e_2 + \\mono {\\mf p}{e}{f}{\\mf e_3} \\mf e_3\\\\ \u0026= \\begin{bmatrix} \\mono {\\mf p}{e}{f}{\\mf e_1}\\\\ \\mono {\\mf p}{e}{f}{\\mf e_2}\\\\ \\mono {\\mf p}{e}{f}{\\mf e_3} \\end{bmatrix} \\ \\\\ \u0026\\eqcolon \\mono {\\mf p}{e}{f}{e}. \\end{align} $$ As in Tedrake‚Äôs notes, if we omit a supercript/subscript, we mean the origin (or Earth) frame: $\\mono {\\mf p}{}{f}{}\\coloneq\\mono {\\mf p}{e}{f}{e}$. This means that $\\mono {\\mf p}{}{}{f}$ is the zero vector, and $\\mono X{}{}{f}$ the identity matrix!\nNotice that $f$ has the same matrix as $\\mono X{}{f}{}$. We can view $f$ both as a frame and as a transformation from $e$ to $f$. Similarly, $\\mf p^f$ can be viewed both as a point in $\\mathbb R^3$ and as the vector going from the origin to $\\mf p^f$. The underlying reason is that, in order to describe to you which point (or frame) I am talking about, I need to first choose an origin (or Earth frame).2\nWe have the following identities for frames $f,g,h,$ and $k$.\n(Vector Addition) $\\mono {\\mf p}{f}{h}{k} = \\mono {\\mf p}{f}{g}{k} + \\mono {\\mf p}{g}{h}{k}$\n(Additive Inverse) $\\mono {\\mf p}{f}{g}{k} = - \\mono {\\mf p}{g}{f}{k}$\n(Inverse Transformation) $\\mono X{f}{g}{} = (\\mono X{g}{f}{})^{-1}$ Using these facts, we can derive the transformation rule for points. Let‚Äôs relate how the frames $e$ and $f$ see the point $\\mf p^g$: $$ \\begin{align} \\mono {\\mf p}~g~ \u0026= \\mono {\\mf p}~f~ + \\mono {\\mf p}fg e\\\\ \u0026= \\mono {\\mf p}~f~ + \\mono {\\mf p}fg{\\mf f_1}\\mf f_1 + \\mono {\\mf p}fg{\\mf f_2}\\mf f_2 + \\mono {\\mf p}fg{\\mf f_3}\\mf f_3\\\\ \u0026= \\mono {\\mf p}~f~ + \\mono{A}~f~ \\mono {\\mf p}fg{f}, \\end{align} $$ $$ \\text{or}\\quad \\begin{bmatrix} \\mono {\\mf p}e g e\\\\ 1 \\end{bmatrix} = \\mono Xef~ \\begin{bmatrix} \\mono {\\mf p}fg{f}\\\\ 1 \\end{bmatrix} $$where $\\mono X~f~=(\\mono{A}~f~, \\mono {\\mf p}~f~)$ and $\\mono{A}~f~\\in GL(3)$ is the matrix $$ \\mono{A}~f~ = \\begin{bmatrix} \\mf f_1 \u0026 \\mf f_2 \u0026 \\mf f_3 \\end{bmatrix}. $$ What we wrote above is just the last column of the formula‚Ä¶\n(Composition) $\\mono Xeg~ = \\mono Xef~ \\mono Xfg~$ While $\\mono Xef~$ translates between how $e$ and $f$ each see the frame $g$, we may be interested in translating between how $e$ and $f$ see the vector going from $f$ to $g$, which is $\\mono {\\mf p}fg~=\\mono {\\mf p}~g~ - \\mono {\\mf p}~f~$. We already know what this looks like: $$ \\mono {\\mf p}fge = \\mono{A}ef~\\mono {\\mf p}fgf. $$When $e$ and $f$ are both positively-oriented orthogonal frames, $\\mono{A}ef~$ is an orthogonal matrix, so we will write it as $\\mono{R}ef~$ instead:\n(Rotation-of-Basis) $\\mono {\\mf p}fge = \\mono{R}ef~\\mono {\\mf p}fgf$ In this case, $\\mono Xef~=(\\mono{R}ef~, \\mono {\\mf p}efe)\\in SE(3)$. These formulae hold if we replace $e$ with $h$; I just used $e$ to simplify the presentation.\nChapter 3. Velocities Suppose we have curves $f :\\mathbb R\\rightarrow \\mathrm F\\mathbb R^3$ and $g :\\mathbb R\\rightarrow \\mathrm F\\mathbb R^3$, such that $f(t)$ and $g(t)$ are moving w.r.t. the origin frame $e$. Our task it to describe their velocities at time $t$.\nSetting up the notation. I introduce the following notation for derivatives:\n$$ \\begin{align} (\\mono X{f}{g}~)' \u0026\\coloneq \\frac{d}{d\\tau}{\\mono X{f(t+\\tau)}{g(t+\\tau)}~}\\Big\\vert_{\\tau=0}\\\\ \\mono X{f}{g'}~ \u0026\\coloneq \\frac{d}{d\\tau}{\\mono X{f(t)}{g(t+\\tau)}~}\\Big\\vert_{\\tau=0}\\\\ \\mono X{f'}{g}~ \u0026\\coloneq \\frac{d}{d\\tau}{\\mono X{f(t+\\tau)}{g(t)}~}\\Big\\vert_{\\tau=0} \\end{align} $$which means that $(\\mono Xgg~)' = \\mf 0$, and so on. Each of these quantities is the component-wise derivative of a time-dependent matrix. By differentiating the identity $$ \\mono X{f(t)}{g(t+\\tau)}~ \\mono X{g(t+\\tau)}{f(t)}~ = \\mf I, $$we get $\\mono Xf{g'}~=-\\mono Xfg~\\,\\mono X{g'}f~\\,\\mono Xfg~$. In particular, $\\mono Xg{g'}~=-\\mono X{g'}g~$.\nBasic physics tells us that, in order to even define what velocity is, we need to decide which frame we consider to be stationary. We will write $\\mono{\\Lambda}fgk$ to denote the velocity of $g$ as seen from $k$, with $f$ considered to be the stationary frame. It is of the form $$ \\mono{\\Lambda}fgk = \\begin{bmatrix} \\mono{\\Omega}fgk \u0026 \\mono{\\mf v}fgk\\\\ \\mf 0 \u0026 0 \\end{bmatrix}\\in \\mathfrak{se}(3), $$ where $\\mono{\\Omega}fgk\\in\\mathfrak{so}(3)$ is a $3\\times 3$ skew-symmetric matrix. We can also call $f$ the reference frame, or the observer frame.\nUsing the notation. We denote the velocity of $g$ as seen from itself, with $e$ considered as the stationary frame, as\n(Left-Invariant Velocity) $ \\mono{\\Lambda}{}gg\\coloneq \\mono Xg{g'}~ $ It follows that $\\mono X{g'}g~ = - \\mono{\\Lambda}{}gg$. Similar to how left-invariant vector fields work on abstract Lie groups, we have $$ \\begin{align} \\mono X~{g'}~=\\frac{d}{d\\tau}{\\mono X{e}{g(t)}~ \\mono X{g(t)}{g(t+\\tau)}~}\\Big\\vert_{\\tau=0} = \\mono X{}g~ \\mono{\\Lambda}{}gg. \\end{align} $$ Thus, $\\mono{\\Lambda}{}gg=(\\mono X{}g~)^{-1}\\,\\mono X{}{g'}~$ is indeed the left-invariant velocity of $g$, with $e$ considered to be the stationary/reference frame. What is then the right-invariant velocity? It is the velocity of $g$ as seen from $e$, with $e$ considered the stationary frame:\n$$ \\mono{\\Lambda}ege\\coloneq \\mono X{e}{g}~ \\mono{\\Lambda}egg \\,\\mono Xge~. $$ The left-invariant velocity is the velocity of $g$ as seen from $g$, while the right-invariant velocity is the velocity of $g$ as seen from $e$. I have been cheeky in choosing $e$ and $g$ as the notation for these frames, since I want $e$ to remind you of the identity element of $SE(3)$! More generally, the adjoint representation gives us the velocity as seen from another frame. Recalling the definition of the adjoint representation , $\\mathrm{Ad}_X:\\mathfrak{se}(3)\\rightarrow\\mathfrak{se}(3)$ for each $X\\in SE(3)$, we have\n(Frame-Change for Velocities) $$ \\begin{align} \\mono{\\Lambda}ghe \u0026\\coloneq \\mono Xef~ \\,\\mono{\\Lambda}ghf \\,\\mono Xfe~\\\\ \u0026=\\mathrm{Ad}_{\\mono X{e}{f}{}}(\\mono{\\Lambda}ghf) \\end{align} $$ The nice symmetric notation helps us remember this formula, although I like the $\\mathrm{Ad}$ notation since it makes the transformation rules look like those of vectors and frames.\nHere is the big payoff of this notation. Velocities add like vectors, as long as they are expressed in the same frame:\n(Addition of Velocities) $ \\mono{\\Lambda}fhk = \\mono{\\Lambda}fgk + \\mono{\\Lambda}ghk $ You are encouraged to prove this! As a hint, notice that it is sufficient to prove this for the case of $k=f$. As an example of how to apply this formula, you can verify that\n$$ \\mono{\\Lambda}{f}{h}{h} = \\mono{\\Lambda}{}{h}{h} - \\mathrm{Ad}_{\\mono X{h}{f}{}}(\\mono{\\Lambda}{}{f}{f}), $$ or the left-invariant velocity of $\\mono X{f}{h}{}$ is the velocity of $h$ minus the velocity of $f$ (as seen from $h$).\nChapter 4. Hat \u0026 Vee Maps For an introduction to the hat and vee maps, see the books by Chirikjian or Barfoot, or Appendix A of my preprint . Basically, $\\mathfrak{so}(3)$ has a certain choice of basis that lets us map skew-symmetric matrices to vectors in $\\mathbb R^3$ using the vee map:\n$$ \\begin{align} \\begin{bmatrix} 0 \u0026 -\\omega_z \u0026 \\omega_y\\\\ \\omega_z \u0026 0 \u0026 -\\omega_x \\\\ -\\omega_y \u0026 \\omega_x \u0026 0 \\end{bmatrix}^\\vee = \\begin{bmatrix} \\omega_x\\\\ \\omega_y\\\\ \\omega_z \\end{bmatrix}, \\end{align} $$ and the hat map is its inverse, so that $\\mono{\\Omega}efg^\\vee = \\mono{\\boldsymbol\\omega}efg$ and $\\mono{\\boldsymbol\\omega}efg^\\wedge = \\mono{\\Omega}efg$. The reason for this peculiar choice of basis is that it defines a Lie algebra isomorphism from $\\mathfrak{so}(3)$ to $(\\mathbb R^3, \\times)$, where $\\times$ is the cross product:\n$$ \\begin{align} \\Omega_1 \\Omega_2 - \\Omega_2 \\Omega_1 = ({\\boldsymbol\\omega}_1 \\times {\\boldsymbol\\omega}_2)^\\wedge \\end{align} $$ and has interesting properties, such as $(\\boldsymbol\\omega^\\wedge) \\mf p = {\\boldsymbol\\omega}\\times \\mf p$. We can extend this to define hat and vee maps for $\\mathfrak{se}(3)$: $$ (\\mono{\\Lambda}{f}{g}{k})^\\vee=\\begin{bmatrix} \\mono{\\boldsymbol\\omega}{f}{g}{k}\\\\ \\mono{\\mf v}{f}{g}{k} \\end{bmatrix} $$ which is the vector that Tedrake writes as $\\mono{\\mathrm V}{f}{g_f}{k}$ (as we will shortly see, my $\\mono{\\mf v}{f}{g}{k}$ is Tedrake‚Äôs $\\mono{\\mf v}{f}{g_f}{k}$). This vee map satisfies the following property; basically the choice of basis for $\\mathfrak{se}(3)$ lets us write the adjoint action as a matrix:\n$$ \\begin{align} \\textrm{Ad}_{\\mono Xhg~}(\\mono \\Lambda efg) = \\left( \\begin{bmatrix} \\mono Rhg~ \u0026 \\mf 0 \\\\ (\\mono {\\mf p}hgh)^{\\hspace{-2pt}^\\wedge} \\,\\mono Rhg~ \u0026 \\mono Rhg~ \\end{bmatrix} \\begin{bmatrix} \\mono {\\boldsymbol\\omega}efg \\\\ \\mono {\\mf v}efg \\end{bmatrix} \\right)^\\wedge \\end{align} $$ Yes, that's a weird-looking matrix, and it is not clear why we are hitting $\\mono {\\mf p}hgh$ with the hat map. But it works! Using the cross-product properties given above, we get the formulae $$ \\begin{align} \\mono {\\boldsymbol\\omega}efh \u0026= \\mono Rhg~ \\mono {\\boldsymbol\\omega}efg\\\\ \\mono {\\mf v}efh \u0026= \\mono {\\mf p}hgh\\times (\\mono Rhg~ \\mono {\\boldsymbol\\omega}efg) + \\mono Rhg~ \\mono {\\mf v}efg \\\\ \u0026=\\mono {\\mf p}hgh\\times \\mono {\\boldsymbol\\omega}efh + \\mono Rhg~ \\mono {\\mf v}efg . \\end{align} $$This is where our notation departs from that of Tedrake. In our notation, the addition of velocities formula looks like\n$$ \\begin{align} \\mono {\\boldsymbol\\omega}fhk \u0026= \\mono {\\boldsymbol\\omega}fgk + \\mono {\\boldsymbol\\omega}ghk\\\\ \\mono {\\mf v}fhk \u0026= \\mono {\\mf v}fgk + \\mono {\\mf v}ghk, \\end{align} $$both angular and translational velocities add when they are expressed in the same frame.\nAppendix A. The Two Definitions This begs the question of what the term $\\mono {\\mf v}ABC$ even means, in Tedrake‚Äôs notation. In his notation, what I am claiming is that $ \\mono{\\mf v}{A}{C_A}A = \\mono{\\mf v}{A}{B_A}A + \\mono{\\mf v}{B}{C_B}A $, which is true! In other words, my $\\mono{\\mf v}{A}{B}A$ is what Tedrake writes as $\\mono{\\mf v}{A}{B_A}A$. Note that $\\mono{\\boldsymbol\\omega}ABA=\\mono{\\boldsymbol\\omega}A{B_A}A$ in both of our notations, but\n$\\mono{\\mf v}A{B}A\\,$$= \\mono{\\mf v}A{B_A}A + \\mono{\\boldsymbol\\omega}A{B}A \\times \\mono{\\mf p}A{B}A $. You can draw some diagrams to see that his choice for representing velocities is very reasonable from a physical standpoint. However, the notation I choose here is more compatible with the group structure of $SE(3)$, and makes the transformation rules look more natural.\nAppendix B. Group Actions An action of $G$ on $X$ is said to be‚Ä¶\neffective (or faithful) if $g\\cdot x=x$ for all $x \\in X$ implies $g=e$. Equivalently, the mapping $G\\mapsto \\textrm{Aut}(X)$ is injective. ‚ÄúEveryone (in $G$) is doing something somewhere (in $X$)\" free if $g\\cdot x=x$ for some $x$ already implies that $g=e$. Given an element $g\\in G\\backslash\\lbrace e\\rbrace$, its action has no fixed points (is fixed-point free!) ‚ÄúEveryone's doing something everywhere\" transitive if any two points are connected by a group action. Consider the task of taking $x_1\\in X$ to $x_2\\in X$‚Ä¶ (Given an arbitrary task) ‚ÄúIt will be done by someone\" regular if transitive and free. This makes $X$ a principal homogeneous $G$-space or a $G$-torsor ; the group element in the definition of transitivity is unique (Given an arbitrary task) ‚ÄúI know just the person!\" It turns out that such a frame can have one of two parities ‚Äî it can either be positively or negatively oriented. Our usual choice of the $\\mathrm{xyz}$ axes is positively oriented, so you can use that fact to come up with your own ‚Äúright-hand rule‚Äù for positive orientation.¬†‚Ü©Ô∏é\nAbstractly speaking, a group has a distinguished point (the identity), while on a homogeneous space we need to choose a reference point. In the context of my previous post , the Earth frame $e$ can be seen as a choice of a distinguished point in $\\mathrm F\\mathbb R^3$. It identifies $\\mathrm F\\mathbb R^3$ with $GL(3)\\ltimes \\mathbb R^3$. Similarly, we can identify $\\mathrm O\\mathbb R^3$ with $SE(3)$; given a frame $f\\in\\mathrm O\\mathbb R^3$, we associate it to the $SE(3)$ transformation $\\mono X~f~ = \\mono Xefe$. In other words, $\\mathrm O\\mathbb R^3$ is an $SE(3)$-torsor.¬†‚Ü©Ô∏é\n",
  "wordCount" : "2548",
  "inLanguage": "en",
  "datePublished": "2025-11-13T21:23:17-05:00",
  "dateModified": "2025-11-13T21:23:17-05:00",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://shirazkn.github.io/posts/robotics/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Shiraz",
    "logo": {
      "@type": "ImageObject",
      "url": "https://shirazkn.github.io/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://shirazkn.github.io/" accesskey="h" title="Shiraz (Alt + H)">Shiraz</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)" aria-label="Toggle theme">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://shirazkn.github.io/archives/" title="archives">
                    <span>archives</span>
                </a>
            </li>
            <li>
                <a href="https://shirazkn.github.io/tags/" title="tags">
                    <span>tags</span>
                </a>
            </li>
            <li>
                <a href="https://shirazkn.github.io/search/" title="search (Alt &#43; /)" accesskey=/>
                    <span>search</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title entry-hint-parent">
      Representing Spatial Velocities
    </h1>
    <div class="post-meta"><span title='2025-11-13 21:23:17 -0500 EST'>November 13, 2025</span>

</div>
  </header> <div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#chapter-1-the-frame-bundle" aria-label="Chapter 1. The Frame Bundle">Chapter 1. The Frame Bundle</a></li>
                <li>
                    <a href="#chapter-2-transformation-rules" aria-label="Chapter 2. Transformation Rules">Chapter 2. Transformation Rules</a></li>
                <li>
                    <a href="#chapter-3-velocities" aria-label="Chapter 3. Velocities">Chapter 3. Velocities</a></li>
                <li>
                    <a href="#chapter-4-hat--vee-maps" aria-label="Chapter 4. Hat &amp; Vee Maps">Chapter 4. Hat &amp; Vee Maps</a></li>
                <li>
                    <a href="#appendix-a-the-two-definitions" aria-label="Appendix A. The Two Definitions">Appendix A. The Two Definitions</a></li>
                <li>
                    <a href="#appendix-b-group-actions" aria-label="Appendix B. Group Actions">Appendix B. Group Actions</a>
                </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><p>I&rsquo;ve been going through Russ Tedrake&rsquo;s <a href="https://manipulation.csail.mit.edu/pick.html" target="_blank" class="accented">
    notes
</a> on robotics, which got me thinking about their so-called <span class=accented>monogram notation</span>. Basically, this is the notation that represents an $SE(3)$ transformation as $^aX^b$ ‚Äî more on that shortly. There is a recent <a href="https://arxiv.org/html/2405.07351v1" target="_blank" class="accented">
    review paper
</a> that points to several variations on this notation, and my postdoc advisor <a href="https://en.wikipedia.org/wiki/Gregory_S._Chirikjian" target="_blank" class="accented">
    Gregory Chirikjian
</a> wrote a <a href="https://trumpf.id.au/pubs/Chirikjian_Mahony_Ruan_Trumpf_JMR2017.pdf?utm_source=chatgpt.com" target="_blank" class="accented">
    paper
</a> on it as well. Tedrake&rsquo;s monogram notation looks very elegant until you get to spatial velocities, at which point strange artifacts such as the &ldquo;cross product&rdquo; will appear.
$\newcommand{\mf}[1]{\mathbf{#1}}$ $\newcommand{\mono}[4]{ { ^{#2} #1 ^{#3} _{#4} } }$</p>
<p>This got me thinking about the connections between the monogram notation and abstract Lie groups. The result of this deliberation was a <span class=accented>new notation for spatial velocities</span> that bridges the gap between abstract Lie groups and their applications to robotics and computer graphics. The notation I present here has the following characteristics:</p>
<ul>
<li>it is consistent with the <a href="https://manipulation.csail.mit.edu/pick.html" target="_blank" class="accented">
    monogram notation
</a> (with a minor caveat, noted in the <a href="/posts/robotics/#appendix-a-the-two-definitions" class="accented">
    appendix
</a>)</li>
<li>it makes the transformation rules for spatial velocities look like those of points, vectors, and frames, and</li>
<li>(for those familiar with abstract Lie groups) it emphasizes the role of the adjoint representation of $SE(3)$.</li>
</ul>
<h2 id="chapter-1-the-frame-bundle"><span class=tertiary>Chapter 1.</span> The Frame Bundle<a hidden class="anchor" aria-hidden="true" href="#chapter-1-the-frame-bundle">#</a></h2>
<p>First, let&rsquo;s think about the space in which frames live. Given a point $\mf p\in \mathbb R^3$, a <span class=accented>frame</span> $f$ at $\mf p^f$ is an ordered set of $3$ linearly independent vectors, $(\mf f_1, \mf f_2, \mf f_3)$, along with the base point $\mf p^f$.
The frame is visualized as arrows starting at $\mf p$ and facing outwards.<sup id="fnref:1"><a href="#fn:1" class="footnote-ref" role="doc-noteref">1</a></sup> The collection of all frames of $\mathbb R^3$ makes up the frame bundle, $\mathrm F\mathbb R^3$.
There is a map $\pi:\mathrm F\mathbb R^3\rightarrow \mathbb R^3$ that maps $f$ to its base point $\mf p^f$, giving us a <a href="/posts/bundles/#-the-frame-bundle" class="accented">
    fiber bundle
</a> structure.</p>
<p>The contents of the frame $f\in\mathrm F\mathbb R^3$ can be stacked into a matrix as follows:
</p>
$$
f=\begin{bmatrix}
\mf f_1 & \mf f_2 & \mf f_3 & \mf p^f\\
0 & 0 & 0 & 1
\end{bmatrix}.
$$<p>
Meanwhile, an element $(A, \mf p)$ of the semi-direct product group $G\coloneq GL(3)\ltimes\mathbb R^3$ can be written as</p>
$$
(A, \mf p) = \begin{bmatrix}
A & \mf p\\
\mf 0 & 1
\end{bmatrix}.
$$<p>
The transformation $(A, \mf p)$ acts on $f$ from the <em>right</em>, giving us another frame that we denote as $g$:
</p>
$$
\begin{align}
f \cdot (A, \mf p) &=  \begin{bmatrix}
\mf f_1 & \mf f_2 & \mf f_3 & \mf p^f\\
0 & 0 & 0 & 1
\end{bmatrix}\begin{bmatrix}
A & \mf p\\
\mf 0 & 1
\end{bmatrix}\\
 &\eqcolon \begin{bmatrix}
\mf g_1 & \mf g_2 & \mf g_3 & \mf p^g\\
0 & 0 & 0 & 1
\end{bmatrix}\\
&=g.
\end{align}
$$<!-- <aside class=aside-right>
The fact that ${^fX^g}$ acts from the <i>right</i> might seem strange, but we will see that this is precisely the <a class=accented href=https://manipulation.csail.mit.edu/pick.html>monogram notation</a>. It's just that the action of ${^fX^g}$ on basis vectors is <i>opposite</i> to its action on the coefficients of vectors expressed w.r.t. that basis.
</aside> -->
<p>Conversely, given a pair of frames $f,g$, there is a unique transformation ${\mono Xfg~}\coloneq(\mono Afg~, \mono {\mf p}fgf)$ in $G$ that takes $f$ to $g$. Equivalently, ${^fX^g}$ is the frame $g$ as seen from $f$. With this notation, we can write the transformation rule for frames as $\mono Xeg~ = \mono Xef~ \mono Xfg~$.</p>
<!-- Because the action is free and transitive, we can identify each transformation with an ordered pair of frames $(f,g)$, where $f$ is the "from" frame and $g$ is the "to" frame. -->
<p style="text-align: center">
<span class=boxed>
${^fX^g}$ is the transformation that takes frame $f$ to frame $g$<br> Equivalently, it's frame $g$ as seen from frame $f$
</span>
</p>
<!-- You may have noticed that the frames $f$ and $g$ themselves look like elements of $G$. This confusion between points on a homogeneous space and elements of the group acting on that space is one of the pitfalls that the monogram notation seeks to address. -->
<aside class=aside-center>
The action of $G$ is transitive and free (it doesn't really matter what these words mean, but I have included a handy guide in the <a href=/posts/robotics/#appendix-b-group-actions class=accented>appendix</a>). In particular, $SE(3)=SO(3)\ltimes \mathbb R^3$ is a subgroup of $G$ that acts on $\mathrm F\mathbb R^3$, and it leaves the subset $\mathrm O\mathbb R^3\subseteq \mathrm F\mathbb R^3$ of positively-oriented orthogonal frames invariant! We will later specialize our discussion to the action of $SE(3)$ on $\mathrm O\mathbb R^3$.
</aside>
<h2 id="chapter-2-transformation-rules"><span class=tertiary>Chapter 2.</span> Transformation Rules<a hidden class="anchor" aria-hidden="true" href="#chapter-2-transformation-rules">#</a></h2>
<div>
<figure class=invertible style="max-width: 100%;">
<img src=/post-images/geometry/frames.png>
</figure>
</div>
<p>In the last chapter, we implicitly assumed that there is a well-defined &ldquo;<span class=accented>origin frame</span>&rdquo;, which we will call $e$. This is the frame that is described by the identity matrix, when concatenated into a matrix. For our purposes, we can assume that this is a frame that is stationary with respect to Earth üåè, and located at a convenient location (perhaps the lower-left corner of my desk).</p>
<p>Let $f$ be the frame attached to the fan on my ceiling (which is currently stationary).
We can describe the vector that goes from $e$ to $f$ as $\mono {\mf p}{e}{f}{~}$. Expressing this vector in the basis of $f$, we have
</p>
$$
\mono {\mf p}{e}{f}{~} = \mono {\mf p}{e}{f}{\mf f_1} \mf f_1 + \mono {\mf p}{e}{f}{\mf f_2} \mf f_2 + \mono {\mf p}{e}{f}{\mf f_3} \mf f_3,
$$<p>
whose coefficients we can represent as a vector:
</p>
$$
\mono {\mf p}{e}{f}{f}\coloneq\begin{bmatrix}
\mono {\mf p}{e}{f}{\mf f_1}\\
\mono {\mf p}{e}{f}{\mf f_2}\\
\mono {\mf p}{e}{f}{\mf f_3}
\end{bmatrix}.
$$<p>
We could also represent $\mono {\mf p}{e}{f}{~}$ in the origin (i.e., Earth) frame:
</p>
$$
\begin{align}
\mono {\mf p}{e}{f}{~} &= \mono {\mf p}{e}{f}{\mf e_1} \mf e_1 + \mono {\mf p}{e}{f}{\mf e_2} \mf e_2 + \mono {\mf p}{e}{f}{\mf e_3} \mf e_3\\
&= \begin{bmatrix}
\mono {\mf p}{e}{f}{\mf e_1}\\
\mono {\mf p}{e}{f}{\mf e_2}\\
\mono {\mf p}{e}{f}{\mf e_3}
\end{bmatrix} \ \\
&\eqcolon \mono {\mf p}{e}{f}{e}.
\end{align}
$$<p>
As in Tedrake&rsquo;s notes, if we omit a supercript/subscript, we mean the origin (or Earth) frame: $\mono {\mf p}{}{f}{}\coloneq\mono {\mf p}{e}{f}{e}$.
This means that $\mono {\mf p}{}{}{f}$ is the zero vector, and $\mono X{}{}{f}$ the identity matrix!</p>
<p>Notice that $f$ has the same matrix as $\mono X{}{f}{}$. We can view $f$ both as a frame and as a transformation from $e$ to $f$. Similarly, $\mf p^f$ can be viewed both as a point in $\mathbb R^3$ and as the vector going from the origin to $\mf p^f$.
The underlying reason is that, in order to describe to you which point (or frame) I am talking about, I need to first choose an origin (or Earth frame).<sup id="fnref:2"><a href="#fn:2" class="footnote-ref" role="doc-noteref">2</a></sup></p>
<p>We have the following identities for frames $f,g,h,$ and $k$.</p>
<p style="text-align: center">
<span class=boxed style="text-align: left">
<span class=secondary>(Vector Addition)</span> $\mono {\mf p}{f}{h}{k} = \mono {\mf p}{f}{g}{k} + \mono {\mf p}{g}{h}{k}$<br>
<span class=secondary>(Additive Inverse)</span> $\mono {\mf p}{f}{g}{k} = - \mono {\mf p}{g}{f}{k}$<br>
<span class=secondary>(Inverse Transformation)</span> $\mono X{f}{g}{} = (\mono X{g}{f}{})^{-1}$
</span>
</p>
<p>Using these facts, we can derive the <span class=accented>transformation rule for points</span>. Let&rsquo;s relate how the frames $e$ and $f$ see the point $\mf p^g$:
</p>
$$
\begin{align}
\mono {\mf p}~g~ &= \mono {\mf p}~f~ + \mono {\mf p}fg e\\
&= \mono {\mf p}~f~ + \mono {\mf p}fg{\mf f_1}\mf f_1 + \mono {\mf p}fg{\mf f_2}\mf f_2 + \mono {\mf p}fg{\mf f_3}\mf f_3\\
&= \mono {\mf p}~f~ + \mono{A}~f~ \mono {\mf p}fg{f},
\end{align}
$$<p>
</p>
$$
\text{or}\quad
\begin{bmatrix}
\mono {\mf p}e g e\\
1
\end{bmatrix}
= \mono Xef~ \begin{bmatrix}
\mono {\mf p}fg{f}\\
1
\end{bmatrix}
$$<p>where $\mono X~f~=(\mono{A}~f~, \mono {\mf p}~f~)$ and $\mono{A}~f~\in GL(3)$ is the matrix
</p>
$$
\mono{A}~f~ = \begin{bmatrix}
\mf f_1 & \mf f_2 & \mf f_3
\end{bmatrix}.
$$<p>
What we wrote above is just the last column of the formula&hellip;</p>
<p style="text-align: center">
<span class=boxed style="text-align: left">
<span class=secondary>(Composition)</span> $\mono Xeg~ = \mono Xef~ \mono Xfg~$
</span>
</p>
<p>While $\mono Xef~$ translates between how $e$ and $f$ each see the <span class=accented>frame</span> $g$, we may be interested in translating between how $e$ and $f$ see the <span class=accented>vector</span> going from $f$ to $g$, which is $\mono {\mf p}fg~=\mono {\mf p}~g~ - \mono {\mf p}~f~$. We already know what this looks like:
</p>
$$
\mono {\mf p}fge = \mono{A}ef~\mono {\mf p}fgf.
$$<p>When $e$ and $f$ are both positively-oriented orthogonal frames, $\mono{A}ef~$ is an orthogonal matrix, so we will write it as $\mono{R}ef~$ instead:</p>
<p style="text-align: center">
<span class=boxed style="text-align: left">
<span class=secondary>(Rotation-of-Basis)</span> $\mono {\mf p}fge = \mono{R}ef~\mono {\mf p}fgf$
</span>
</p>
<p>In this case, $\mono Xef~=(\mono{R}ef~, \mono {\mf p}efe)\in SE(3)$. These formulae hold if we replace $e$ with $h$; I just used $e$ to simplify the presentation.</p>
<h2 id="chapter-3-velocities"><span class=tertiary>Chapter 3.</span> Velocities<a hidden class="anchor" aria-hidden="true" href="#chapter-3-velocities">#</a></h2>
<p>Suppose we have curves $f :\mathbb R\rightarrow \mathrm F\mathbb R^3$ and $g :\mathbb R\rightarrow \mathrm F\mathbb R^3$, such that $f(t)$ and $g(t)$ are moving w.r.t. the origin frame $e$. Our task it to describe their velocities at time $t$.</p>
<p><em><span class=tertiary>Setting up the notation.</span></em> I introduce the following notation for derivatives:</p>
$$
\begin{align}
(\mono X{f}{g}~)' &\coloneq \frac{d}{d\tau}{\mono X{f(t+\tau)}{g(t+\tau)}~}\Big\vert_{\tau=0}\\
\mono X{f}{g'}~ &\coloneq \frac{d}{d\tau}{\mono X{f(t)}{g(t+\tau)}~}\Big\vert_{\tau=0}\\
\mono X{f'}{g}~ &\coloneq \frac{d}{d\tau}{\mono X{f(t+\tau)}{g(t)}~}\Big\vert_{\tau=0}
\end{align}
$$<p>which means that $(\mono Xgg~)' = \mf 0$, and so on. Each of these quantities is the component-wise derivative of a time-dependent matrix. By differentiating the identity
</p>
$$
\mono X{f(t)}{g(t+\tau)}~ \mono X{g(t+\tau)}{f(t)}~ = \mf I,
$$<p>we get $\mono Xf{g'}~=-\mono Xfg~\,\mono X{g'}f~\,\mono Xfg~$. In particular, $\mono Xg{g'}~=-\mono X{g'}g~$.</p>
<p>Basic physics tells us that, in order to even define what <em>velocity</em> is, we need to decide which frame we consider to be <em>stationary</em>. We will write $\mono{\Lambda}fgk$ to denote the velocity of $g$ as seen from $k$, with $f$ considered to be the stationary frame. It is of the form
</p>
$$
\mono{\Lambda}fgk = \begin{bmatrix}
\mono{\Omega}fgk & \mono{\mf v}fgk\\
\mf 0 & 0
\end{bmatrix}\in \mathfrak{se}(3),
$$<p>
where $\mono{\Omega}fgk\in\mathfrak{so}(3)$ is a $3\times 3$ skew-symmetric matrix. We can also call $f$ the <em>reference</em> frame, or the <em>observer</em> frame.</p>
<p><em><span class=tertiary>Using the notation.</span></em>
We denote the velocity of $g$ as seen from itself, with $e$ considered as the stationary frame, as</p>
<p style="text-align: center">
<span class=boxed style="text-align: center">
<span class=secondary>(Left-Invariant Velocity)</span>
$
\mono{\Lambda}{}gg\coloneq \mono Xg{g'}~
$
</span>
</p>
<p>It follows that $\mono X{g'}g~ = - \mono{\Lambda}{}gg$. Similar to how left-invariant vector fields work on abstract Lie groups, we have
</p>
$$
\begin{align}
\mono X~{g'}~=\frac{d}{d\tau}{\mono X{e}{g(t)}~ \mono X{g(t)}{g(t+\tau)}~}\Big\vert_{\tau=0} = \mono X{}g~ \mono{\Lambda}{}gg.
\end{align}
$$<!-- $$
\begin{align}
\frac{d}{d\tau}{\mono X{g(t+\tau)}f~}\Big\vert_{\tau=0}=\frac{d}{d\tau}{\mono X{g(t+\tau)}{g(t)}~ \mono X{g(t)}f~}\Big\vert_{\tau=0} = \mono{\Lambda}{\dot g}~~ \mono X{g}f~
\end{align}
$$ -->
<p>Thus, $\mono{\Lambda}{}gg=(\mono X{}g~)^{-1}\,\mono X{}{g'}~$ is indeed the <span class=accented>left-invariant velocity</span> of $g$, with $e$ considered to be the stationary/reference frame. What is then the right-invariant velocity? It is the velocity of $g$ as seen from $e$, with $e$ considered the stationary frame:</p>
$$
\mono{\Lambda}ege\coloneq  \mono X{e}{g}~ \mono{\Lambda}egg \,\mono Xge~.
$$<aside class=aside-center>
The left-invariant velocity is the velocity of $g$ as seen from $g$, while the right-invariant velocity is the velocity of $g$ as seen from $e$. I have been cheeky in choosing $e$ and $g$ as the notation for these frames, since I want $e$ to remind you of the identity element of $SE(3)$! 
</aside>
<p>More generally, the adjoint representation gives us the velocity <em>as seen from</em> another frame. Recalling the definition of the <a href="https://en.wikipedia.org/wiki/Adjoint_representation" target="_blank" class="accented">
    adjoint representation
</a>, $\mathrm{Ad}_X:\mathfrak{se}(3)\rightarrow\mathfrak{se}(3)$ for each $X\in SE(3)$, we have</p>
<p style="text-align: center">
<span class=boxed style="text-align: center">
<span class=secondary>(Frame-Change for Velocities)</span>
$$
\begin{align}
\mono{\Lambda}ghe &\coloneq  \mono Xef~ \,\mono{\Lambda}ghf \,\mono Xfe~\\
&=\mathrm{Ad}_{\mono X{e}{f}{}}(\mono{\Lambda}ghf)
\end{align}
$$
</span>
</p>
<p>The nice symmetric notation helps us remember this formula, although I like the $\mathrm{Ad}$ notation since it makes the transformation rules look like those of vectors and frames.</p>
<p>Here is the big payoff of this notation. Velocities add like vectors, as long as they are expressed in the same frame:</p>
<p style="text-align: center">
<span class=boxed style="text-align: left">
<span class=secondary>(Addition of Velocities)</span>
$
\mono{\Lambda}fhk = \mono{\Lambda}fgk + \mono{\Lambda}ghk
$
</span>
</p>
<p>You are encouraged to prove this! As a hint, notice that it is sufficient to prove this for the case of $k=f$. As an example of how to apply this formula, you can verify that</p>
$$
\mono{\Lambda}{f}{h}{h} = \mono{\Lambda}{}{h}{h} - \mathrm{Ad}_{\mono X{h}{f}{}}(\mono{\Lambda}{}{f}{f}),
$$<p>
or the left-invariant velocity of $\mono X{f}{h}{}$ is the velocity of $h$ minus the velocity of $f$ (as seen from $h$).</p>
<h2 id="chapter-4-hat--vee-maps"><span class=tertiary>Chapter 4.</span> Hat &amp; Vee Maps<a hidden class="anchor" aria-hidden="true" href="#chapter-4-hat--vee-maps">#</a></h2>
<p>For an introduction to the hat and vee maps, see the books by Chirikjian or Barfoot, or Appendix A of my <a href="https://arxiv.org/abs/2508.12030" target="_blank" class="accented">
    preprint
</a>. Basically, $\mathfrak{so}(3)$ has a certain choice of basis that lets us map skew-symmetric matrices to vectors in $\mathbb R^3$ using the <em>vee</em> map:</p>
$$
\begin{align}
\begin{bmatrix}
0 & -\omega_z & \omega_y\\
\omega_z & 0 & -\omega_x \\
-\omega_y & \omega_x & 0
\end{bmatrix}^\vee = \begin{bmatrix}
\omega_x\\
\omega_y\\
\omega_z
\end{bmatrix},
\end{align}
$$<p>
and the hat map is its inverse, so that $\mono{\Omega}efg^\vee = \mono{\boldsymbol\omega}efg$ and $\mono{\boldsymbol\omega}efg^\wedge = \mono{\Omega}efg$. The reason for this peculiar choice of basis is that it defines a Lie algebra isomorphism from $\mathfrak{so}(3)$ to $(\mathbb R^3, \times)$, where $\times$ is the cross product:</p>
<p style="text-align: center">
<span class=boxed style="text-align: center">
$$
\begin{align}
\Omega_1 \Omega_2 - \Omega_2 \Omega_1 = ({\boldsymbol\omega}_1 \times {\boldsymbol\omega}_2)^\wedge
\end{align}
$$
</span>
</p>
<p>and has interesting properties, such as $(\boldsymbol\omega^\wedge) \mf p = {\boldsymbol\omega}\times \mf p$. We can extend this to define hat and vee maps for $\mathfrak{se}(3)$:
</p>
$$
(\mono{\Lambda}{f}{g}{k})^\vee=\begin{bmatrix}
\mono{\boldsymbol\omega}{f}{g}{k}\\
\mono{\mf v}{f}{g}{k}
\end{bmatrix}
$$<p>
which is the vector that Tedrake writes as <span class=secondary>$\mono{\mathrm V}{f}{g_f}{k}$</span> (as we will shortly see, my $\mono{\mf v}{f}{g}{k}$ is Tedrake&rsquo;s <span class=secondary>$\mono{\mf v}{f}{g_f}{k}$</span>). This vee map satisfies the following property; basically the choice of basis for $\mathfrak{se}(3)$ lets us write the adjoint action as a matrix:</p>
<p style="text-align: center">
<span class=boxed style="text-align: center">
$$
\begin{align}
\textrm{Ad}_{\mono Xhg~}(\mono \Lambda efg) = \left(
        \begin{bmatrix}
                \mono Rhg~ & \mf 0 \\
                (\mono {\mf p}hgh)^{\hspace{-2pt}^\wedge} \,\mono Rhg~ & \mono Rhg~
        \end{bmatrix}
        \begin{bmatrix}
        \mono {\boldsymbol\omega}efg \\ \mono {\mf v}efg 
        \end{bmatrix}
        \right)^\wedge
\end{align}
$$
</span>
</p>
Yes, that's a weird-looking matrix, and it is not clear why we are hitting $\mono {\mf p}hgh$ with the hat map. But it works! Using the cross-product properties given above, we get the formulae 
$$
\begin{align}
\mono {\boldsymbol\omega}efh  &=  \mono Rhg~  \mono {\boldsymbol\omega}efg\\
\mono {\mf v}efh &= \mono {\mf p}hgh\times (\mono Rhg~  \mono {\boldsymbol\omega}efg) + \mono Rhg~ \mono {\mf v}efg \\
&=\mono {\mf p}hgh\times \mono {\boldsymbol\omega}efh + \mono Rhg~ \mono {\mf v}efg .
\end{align}
$$<p>This is where our notation departs from that of Tedrake. In our notation, the <em>addition of velocities</em> formula looks like</p>
$$
\begin{align}
\mono {\boldsymbol\omega}fhk  &=  \mono {\boldsymbol\omega}fgk + \mono {\boldsymbol\omega}ghk\\
\mono {\mf v}fhk  &=  \mono {\mf v}fgk + \mono {\mf v}ghk,
\end{align}
$$<p><em>both</em> angular and translational velocities add when they are expressed in the same frame.</p>
<!-- <aside class=aside-center>

</aside> -->
<hr>
<h2 id="appendix-a-the-two-definitions"><span class=tertiary>Appendix A.</span> The Two Definitions<a hidden class="anchor" aria-hidden="true" href="#appendix-a-the-two-definitions">#</a></h2>
<p>This begs the question of what the term <span class=tertiary>$\mono {\mf v}ABC$</span> even means, in Tedrake&rsquo;s notation. In his notation, what I am claiming is that
$
\mono{\mf v}{A}{C_A}A = \mono{\mf v}{A}{B_A}A + \mono{\mf v}{B}{C_B}A
$, which is true! In other words, my <span style="color:var(--primary)">$\mono{\mf v}{A}{B}A$</span> is what Tedrake writes as $\mono{\mf v}{A}{B_A}A$. Note that $\mono{\boldsymbol\omega}ABA=\mono{\boldsymbol\omega}A{B_A}A$ in both of our notations, but</p>
<div style="text-align: center; padding-bottom:1em">
<span class=tertiary>$\mono{\mf v}A{B}A\,$</span>$= \mono{\mf v}A{B_A}A + \mono{\boldsymbol\omega}A{B}A \times \mono{\mf p}A{B}A $.
</div>
<p>You can draw some diagrams to see that his choice for representing velocities is very reasonable from a physical standpoint. However, the notation I choose here is more compatible with the group structure of $SE(3)$, and makes the transformation rules look more natural.</p>
<h2 id="appendix-b-group-actions"><span class=tertiary>Appendix B.</span> Group Actions<a hidden class="anchor" aria-hidden="true" href="#appendix-b-group-actions">#</a></h2>
<p>An action of $G$ on $X$ is said to be&hellip;</p>
<ul>
<li><span class=accented>effective</span> (or <span class=accented>faithful</span>) if $g\cdot x=x$ for all $x \in X$ implies $g=e$.
Equivalently, the mapping $G\mapsto \textrm{Aut}(X)$ is injective.
  <p class="equation-like secondary">
              <span class=secondary> 
              ‚ÄúEveryone (in $G$) is doing something <i>somewhere</i> (in $X$)"
              </span>
      </p>
</li>
<li><span class=accented>free</span> if $g\cdot x=x$ for some $x$ already implies that $g=e$.
Given an element $g\in G\backslash\lbrace e\rbrace$, its action has no fixed points (is fixed-point free!)
  <p class="equation-like secondary">
              <span class=secondary> 
              ‚ÄúEveryone's doing something <i>everywhere</i>"
              </span>
      </p>
</li>
<li><span class=accented>transitive</span> if any two points are connected by a group action. Consider the task of taking $x_1\in X$ to $x_2\in X$&hellip;
  <p class="equation-like secondary">
              <span class=secondary> 
              (Given an arbitrary task) ‚ÄúIt will be done by someone"
              </span>
      </p>
</li>
<li><span class=accented>regular</span> if transitive and free. This makes
$X$ a principal homogeneous $G$-space or a <a href="/posts/bundles" class="accented">
    $G$-torsor
</a>; the group element in the definition of transitivity is unique
  <p class="equation-like secondary">
              <span class=secondary> 
              (Given an arbitrary task) ‚ÄúI know just the person!"
              </span>
      </p></li>
</ul>
<div class="footnotes" role="doc-endnotes">
<hr>
<ol>
<li id="fn:1">
<p>It turns out that such a frame can have one of two parities ‚Äî it can either be <em>positively</em> or <em>negatively</em> oriented. Our usual choice of the $\mathrm{xyz}$ axes is positively oriented, so you can use that fact to come up with your own &ldquo;right-hand rule&rdquo; for positive orientation.&#160;<a href="#fnref:1" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
<li id="fn:2">
<p>Abstractly speaking, a group has a distinguished point (the identity), while on a homogeneous space we need to <i>choose</i> a reference point. In the context of <a href="/posts/bundles" class="accented">
    my previous post
</a>, the Earth frame $e$ can be seen as a choice of a distinguished point in $\mathrm F\mathbb R^3$. It identifies $\mathrm F\mathbb R^3$ with $GL(3)\ltimes \mathbb R^3$. Similarly, we can identify $\mathrm O\mathbb R^3$ with $SE(3)$; given a frame $f\in\mathrm O\mathbb R^3$, we associate it to the $SE(3)$ transformation $\mono X~f~ = \mono Xefe$. In other words, $\mathrm O\mathbb R^3$ is an $SE(3)$-torsor.&#160;<a href="#fnref:2" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
</ol>
</div>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://shirazkn.github.io/tags/robotics/">Robotics</a></li>
      <li><a href="https://shirazkn.github.io/tags/lie-groups/">Lie-Groups</a></li>
      <li><a href="https://shirazkn.github.io/tags/geometry/">Geometry</a></li>
    </ul>
  </footer>
<script src="https://giscus.app/client.js"
        data-repo="shirazkn/shirazkn.github.io"
        data-repo-id="R_kgDOI2VbWw"
        data-category="Announcements"
        data-category-id="DIC_kwDOI2VbW84CWJnt"
        data-mapping="title"
        data-strict="0"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-input-position="bottom"
        data-theme="noborder_light"
        data-lang="en"
        crossorigin="anonymous"
        async>
</script>
</article>
    </main>
    
<footer class="footer">
    
    
    
    
    
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a><div class="headerfooter">
    <sub><sup><sub>..</sub></sup></sub>
</div>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
